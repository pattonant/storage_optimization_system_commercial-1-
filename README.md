# 华为云存储服务控制系统

## 项目简介

本项目是华为云存储服务控制系统，旨在通过减少硬盘数据碎片化程度，提升系统整体效率。系统通过优化存储对象的布局，降低数据碎片率，提高访问效率，从而提升整体性能。

## 系统功能

1. 数据导入：支持导入符合比赛格式的数据文件
2. 存储优化：实现多种优化算法，减少数据碎片化
3. 结果输出：生成符合比赛要求的输出文件

## 算法原理

系统实现了三种优化算法：

### 1. 贪心算法

贪心算法基于对象的访问频率和大小进行综合评分，将评分高的对象优先排在前面。算法考虑了以下因素：
- 访问频率：频率高的对象排在前面，提高访问效率
- 对象大小：中等大小的对象可能更适合优化布局，减少碎片

### 2. 动态规划

动态规划算法通过分段优化的方式处理大规模数据，对每个分段进行局部优化，然后合并结果。算法考虑了以下因素：
- 访问频率和大小的加权组合
- 对大规模数据采用分段处理策略
- 针对不同数据特性调整权重

### 3. 启发式搜索

启发式搜索使用模拟退火算法，通过随机扰动当前解来探索更优的布局。算法包含以下特点：
- 多种邻域操作：交换、插入、反转
- 温度控制：高温时接受较差解的概率高，低温时倾向于接受更好的解
- 自适应搜索：根据当前解的质量动态调整搜索策略

## 性能评分

系统使用多维度指标评估存储布局的性能：
1. 碎片化程度：相邻对象的不连续性
2. 访问效率：考虑对象的访问频率和位置
3. 空间利用率：已使用空间与总硬盘空间的比例
4. 局部性得分：相邻对象访问频率的相似度

## 使用方法

### 命令行版本

```bash
python3 main.py <input_file> <output_file> [options]
```

参数说明：
- `input_file`：输入数据文件路径
- `output_file`：输出结果文件路径
- `--algorithm, -a`：优化算法，可选值：greedy(贪心算法)、dp(动态规划)、heuristic(启发式搜索)，默认为greedy
- `--disk_space, -d`：硬盘空间大小(GB)，默认为1000.0
- `--token_count, -t`：令牌数量，默认为100
- `--verbose, -v`：显示详细信息

示例：
```bash
python3 main.py sample_test.in output.out --algorithm heuristic --verbose
```

## 输入格式

输入文件的第一行包含两个数字：硬盘空间大小和令牌数量。
从第二行开始，每行表示一个存储对象，包含三个数字：对象ID、对象大小和访问频率。

示例：
```
1000 100
1 2.47 0.9018
2 5.63 0.4521
3 7.89 0.6732
...
```

## 输出格式

输出文件中每行包含一个对象ID，表示优化后的对象顺序。

示例：
```
23
87
48
33
...
```

## 优化策略

1. **访问频率优先**：将访问频率高的对象放在前面，提高整体访问效率
2. **大小平衡**：考虑对象大小，避免过大或过小的对象造成碎片
3. **局部性优化**：将访问频率相似的对象放在一起，提高局部性
4. **分段处理**：对大规模数据采用分段优化策略，提高算法效率
5. **多维度评分**：综合考虑碎片化程度、访问效率、空间利用率和局部性

## 文件说明

- `main.py`：主程序，命令行版本
- `optimizer.py`：存储优化算法实现
- `generate_test_data.py`：测试数据生成工具
- `README.md`：项目说明文档

## 环境要求

- Python 3.7.3 或更高版本
- 无需额外依赖库
